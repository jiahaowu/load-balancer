syntax = "proto3";

option java_multiple_files = true;
option java_package = "com.jiahaowu.balancer.protocol";

package comm;

service ConnectionService {
    // allow nodes join the cluster
    rpc JoinCluster(JoinRequest) returns(JoinResponse) {}
}

message JoinRequest {
    string hostname = 1;
    string ipAddr = 2;
    double performance = 3;
}

message JoinResponse {
    int32 id = 1;
    int32 nodeCount = 2;
}

message ComputingNode {
    int32 id = 1;
    string hostname = 2;
    string ipAddr = 3;
    double performance = 4;
}

message Cluster {
    repeated ComputingNode nodes = 1;
}
